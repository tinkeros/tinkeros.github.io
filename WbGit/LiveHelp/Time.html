<!DOCTYPE HTML>
<html style="background-color:#FFFFFF;">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=US-ASCII">
<title>The Temple Operating System</title>
<meta name="keywords" content="Operating System,64-Bit,64 Bit,Temple,OS,TempleOS,Free,Open Source,Public Domain,x86_64">
<meta name="generator" content="TinkerOS V5.17">
<style type="text/css">
.cB0{color:#000000;background-color:#55ffff;}
.cB2{color:#00aa00;background-color:#55ffff;}
.cB4{color:#aa0000;background-color:#55ffff;}
.cB5{color:#aa00aa;background-color:#55ffff;}
.cF0{color:#000000;background-color:#ffffff;}
.cF1{color:#0000aa;background-color:#ffffff;}
.cF2{color:#00aa00;background-color:#ffffff;}
.cF3{color:#00aaaa;background-color:#ffffff;}
.cF4{color:#aa0000;background-color:#ffffff;}
.cF5{color:#aa00aa;background-color:#ffffff;}
.cF6{color:#aa5500;background-color:#ffffff;}
.cF7{color:#aaaaaa;background-color:#ffffff;}
.cF8{color:#555555;background-color:#ffffff;}
.cF9{color:#5555ff;background-color:#ffffff;}
.cFA{color:#55ff55;background-color:#ffffff;}
.cFB{color:#55ffff;background-color:#ffffff;}
.cFC{color:#ff5555;background-color:#ffffff;}
.cFD{color:#ff55ff;background-color:#ffffff;}
.cFE{color:#ffff55;background-color:#ffffff;}
.cFF{color:#ffffff;background-color:#ffffff;}
</style>
</head>
<body style="background-color:#55FFFF; border-style:solid;
	  border-width:8px; border-color:#0000AA;
	  margin-left:auto; margin-right:auto; width:800px; ">
<pre style="font-family:courier;font-size:10pt;font-variant-ligatures: none;">
<div style="margin-left:auto; margin-right:auto; width: 640px;">
<a name="l1"></a><span class=cB5>                                <h1><center>Time/CPU Cycles</center></h1></span><span class=cB0>
<a name="l2"></a>Intel/AMD have an inst that returns the num of CPU cycles since boot.  This is 
<a name="l3"></a>not a steady, calibrated real time value.  TempleOS measures it and you can 
<a name="l4"></a>convert with </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l677"><span class=cB4>cnts.time_stamp_freq</span></a><span class=cB0>, a value continuously calibrated from other 
<a name="l5"></a>cnts.
<a name="l6"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l122"><span class=cB4>Busy                </span></a><span class=cB0>Funct </span><span class=cB2>Loosely timed.</span><span class=cB4>
<a name="l7"></a></span><a href="http://tinkeros.github.io/WbGit/Adam/Opt/Utils/CPURep.html#l27"><span class=cB4>CPURep              </span></a><span class=cB0>Funct </span><span class=cB2>Report number of cores and clock freq.</span><span class=cB4>
<a name="l8"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelB.html#l294"><span class=cB4>GetTSC              </span></a><span class=cB0>Funct </span><span class=cB2>_extern SYS_INITRAMFS_PTR U8* sys_initramfs_ptr;</span><span class=cB4>
<a name="l9"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l1"><span class=cB4>PortNop             </span></a><span class=cB0>Funct </span><span class=cB2>Innoculous (reads IRQ Mask) which should take fixed time</span><span class=cB4>
<a name="l10"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KGlbls.html#l30"><span class=cB4>cnts                </span></a><span class=cB0>GlbVar </span><span class=cB2>CCntsGlbls cnts= {1,0,2676302000,2676302,2676302000,FALSE};</span><span class=cB0>
<a name="l11"></a>
<a name="l12"></a>
<a name="l13"></a></span><span class=cB5>                                   <h1><center>Time/Date</center></h1></span><span class=cB0>
<a name="l14"></a>Dates are 32-bit signed ints representing the number of days since the birth of 
<a name="l15"></a>Christ.  Negative values represent B.C.E. dates.
<a name="l16"></a>
<a name="l17"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l34"><span class=cB4>DayOfWeek           </span></a><span class=cB0>Funct </span><span class=cB2>Day of week, given 32-bit day since AD 0.</span><span class=cB4>
<a name="l18"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l79"><span class=cB4>FirstDayOfMon       </span></a><span class=cB0>Funct </span><span class=cB2>First day of month, given 32-bit day since AD 0.</span><span class=cB4>
<a name="l19"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l107"><span class=cB4>FirstDayOfYear      </span></a><span class=cB0>Funct </span><span class=cB2>First day of year, given 32-bit day since AD 0.</span><span class=cB4>
<a name="l20"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l90"><span class=cB4>LastDayOfMon        </span></a><span class=cB0>Funct </span><span class=cB2>Last day of month, given 32-bit day since AD 0.</span><span class=cB4>
<a name="l21"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l119"><span class=cB4>LastDayOfYear       </span></a><span class=cB0>Funct </span><span class=cB2>Last day of year, given 32-bit day since AD 0.</span><span class=cB4>
<a name="l22"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l12"><span class=cB4>YearStartDate       </span></a><span class=cB0>Funct </span><span class=cB2>32-bit day since AD 0, given year number.</span><span class=cB4>
<a name="l23"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l3"><span class=cB4>mon_start_days1     </span></a><span class=cB0>GlbVar </span><span class=cB2>U16 mon_start_days1[12]=</span><span class=cB4>
<a name="l24"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l7"><span class=cB4>mon_start_days2     </span></a><span class=cB0>GlbVar </span><span class=cB2>U16 mon_start_days2[12]=</span><span class=cB0>
<a name="l25"></a>
<a name="l26"></a>
<a name="l27"></a></span><span class=cB5>                                <h1><center>Time/Date/CDate</center></h1></span><span class=cB0>
<a name="l28"></a>TempleOS uses a 64-bit value, </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l188"><span class=cB4>CDate</span></a><span class=cB0>, for date/time.  The upper 32-bits are the 
<a name="l29"></a>days since Christ.  The lower 32-bits store time of day divided by 4 billion 
<a name="l30"></a>which works out to 49710ths of a second.  You can subtract two </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l188"><span class=cB4>CDate</span></a><span class=cB0>'s to get a 
<a name="l31"></a>time span.
<a name="l32"></a>
<a name="l33"></a>Use </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l688"><span class=cB4>CDATE_FREQ</span></a><span class=cB0> to convert.
<a name="l34"></a>
<a name="l35"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l43"><span class=cB4>Date2Struct         </span></a><span class=cB0>Funct </span><span class=cB2>Cvt CDate to CDateStruct.</span><span class=cB4>
<a name="l36"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l195"><span class=cB4>Now                 </span></a><span class=cB0>Funct </span><span class=cB2>Current datetime.</span><span class=cB4>
<a name="l37"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/StrScan.html#l165"><span class=cB4>Str2Date            </span></a><span class=cB0>Funct </span><span class=cB2>{</span><span class=cB4>
<a name="l38"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KDate.html#l18"><span class=cB4>Struct2Date         </span></a><span class=cB0>Funct </span><span class=cB2>Cvt CDateStruct to CDate.</span><span class=cB4>
<a name="l39"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KGlbls.html#l23"><span class=cB4>local_time_offset   </span></a><span class=cB0>GlbVar </span><span class=cB2>CDate local_time_offset;</span><span class=cB0>
<a name="l40"></a>
<a name="l41"></a>
<a name="l42"></a></span><span class=cB5>                                  <h1><center>Time/Jiffies</center></h1></span><span class=cB0>
<a name="l43"></a>One jiffy is one time slice.  </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l677"><span class=cB4>cnts.jiffies</span></a><span class=cB0> returns time slices since boot.
<a name="l44"></a></span><span class=cB4>
<a name="l45"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l62"><span class=cB4>SysTimerRead</span></a><span class=cB0> reads the timer ticks since boot.  It's not as fast as </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelB.html#l294"><span class=cB4>GetTSC</span></a><span class=cB0>.
<a name="l46"></a>
<a name="l47"></a>Use </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l687"><span class=cB4>JIFFY_FREQ</span></a><span class=cB0> to convert </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l677"><span class=cB4>cnts.jiffies</span></a><span class=cB0>.
<a name="l48"></a>
<a name="l49"></a>Use </span><a href="http://tinkeros.github.io/WbGit/Kernel/KernelA.html#l689"><span class=cB4>SYS_TIMER_FREQ</span></a><span class=cB0> to convert </span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l62"><span class=cB4>SysTimerRead</span></a><span class=cB0>.
<a name="l50"></a>
<a name="l51"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l137"><span class=cB4>Sleep               </span></a><span class=cB0>Funct </span><span class=cB2>Not for power-saving. It is to make a program pause without hogging the CPU.</span><span class=cB4>
<a name="l52"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l129"><span class=cB4>SleepUntil          </span></a><span class=cB0>Funct </span><span class=cB2>Not for power-saving. It is to make a program pause without hogging the CPU.</span><span class=cB4>
<a name="l53"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l62"><span class=cB4>SysTimerRead        </span></a><span class=cB0>Funct </span><span class=cB2>System timer count with overflow already handled.</span><span class=cB4>
<a name="l54"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KGlbls.html#l30"><span class=cB4>cnts                </span></a><span class=cB0>GlbVar </span><span class=cB2>CCntsGlbls cnts= {1,0,2676302000,2676302,2676302000,FALSE};</span><span class=cB0>
<a name="l55"></a>
<a name="l56"></a>
<a name="l57"></a></span><span class=cB5>                                  <h1><center>Time/Seconds</center></h1></span><span class=cB4>
<a name="l58"></a></span><a href="http://tinkeros.github.io/WbGit/Adam/Snd/ASnd.html#l120"><span class=cB4>Beat                </span></a><span class=cB0>Funct </span><span class=cB2>Time in music beats.</span><span class=cB4>
<a name="l59"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l115"><span class=cB4>Blink               </span></a><span class=cB0>Funct </span><span class=cB2>Return TRUE, then FALSE, then TRUE at given frequency.</span><span class=cB4>
<a name="l60"></a></span><a href="http://tinkeros.github.io/WbGit/Adam/Snd/ASnd.html#l115"><span class=cB4>tM                  </span></a><span class=cB0>Funct </span><span class=cB2>Time in seconds synced to music subsystem.</span><span class=cB4>
<a name="l61"></a></span><a href="http://tinkeros.github.io/WbGit/Kernel/KMisc.html#l110"><span class=cB4>tS                  </span></a><span class=cB0>Funct </span><span class=cB2>Time since boot in seconds as a float.</span><span class=cB0>
</span></div></pre></body>
</html>
